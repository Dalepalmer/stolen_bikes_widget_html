var stolenBinxList,unableToBinxList,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};stolenBinxList=function(e){var t,n,i,s,o,r,a,l,c,d;for(a=document.getElementById("bi-stolen-widget"),s=document.createElement("ul"),s.setAttribute("id","bistole-list"),s.innerHTML="",i=c=0,d=e.length;d>c&&(t=e[i],!(i>6));i=++c)r=new Date(Date.parse(t.stolen_record.date_stolen)),r=r.toString().split(/\d{2}:/)[0],o="<li>",null!=t.thumb&&(o+="<a href='"+t.url+"' class='stolen-thumb'><img src='"+t.thumb+"'></a>"),o+="  <h4>\n    <a href='"+t.url+"'>"+t.title+"</a>\n  </h4>\n  <p>\n    Stolen from "+t.stolen_record.location+"\n    &mdash; on "+r+"\n  </p>\n</li>",s.innerHTML+=o;return a.appendChild(s),l=document.createElement("div"),l.setAttribute("class","widget-info"),l.innerHTML="Recent thefts near you",a.appendChild(l),n=getComputedStyle(document.getElementById("bistole-body")).height,document.getElementById("bistole-list").style.height=n},unableToBinxList=function(){var e,t;return t=document.getElementById("bi-stolen-widget"),e=document.createElement("div"),e.innerHTML="<div class='binxerror'>\n<h4>Something went wrong. We couldn't get any recent stolen bikes. Check the <a href='https://bikeindex.org'>Bike Index</a> for an updated list.</h4>\n<pre>\n          ~~O     \n        -  /,    \n       -  -|~(*)  \n      -  (*)      \n\n     ---^------   \n</pre><p>... or maybe you should just go ride your bike</p></div>",t.appendChild(e)},function(){var cache,is_cached,location,req,time,url;return location=document.getElementById("bi-stolen-widget").getAttribute("data-location"),is_cached=!1,cache=localStorage.getItem("binx_rstolen"),time=(new Date).getTime(),null!=cache&&cache.length>0&&(cache=JSON.parse(cache),null!=cache.time&&time-cache.time<216e5&&(is_cached=!0,stolenBinxList(cache.bikes,location))),is_cached?void 0:(req=new XMLHttpRequest,url="https://bikeindex.org/api/v1/bikes?stolen=true&proximity="+location+"&proximity_radius=100",req.addEventListener("readystatechange",function(){var data,successResultCodes,_ref;return 4===req.readyState?(successResultCodes=[200],_ref=req.status,__indexOf.call(successResultCodes,_ref)>=0?(data=eval("("+req.responseText+")"),stolenBinxList(data.bikes,location),cache={bikes:data.bikes,time:time},localStorage.setItem("binx_rstolen",JSON.stringify(cache))):unableToBinxList()):void 0}),req.open("GET",url,!1),req.send())}();